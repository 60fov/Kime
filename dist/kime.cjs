"use strict";const o=require("react"),r=require("./kime-747d8327.cjs"),v=c=>{const[a,u]=o.useState(!1),[s,k]=o.useState("");function i(e){var t;(t=c.current)==null||t.dispatchEvent(new CustomEvent("kimeinput",{detail:{value:e}}))}const m=o.useCallback(e=>{const t=r.jamo.single.includes(e.key)?e.key:r.kime.keyLookUp(e.key);if(t){if(e.altKey||e.metaKey||e.ctrlKey)return;e.preventDefault();const n=s.split("");if(a){const p=n.pop()??"",y=r.kime.compose([...r.kime.decompose(p),t]);n.push(...y);const l=n.join("");i(l)}else i(s+t),u(!0)}else if(e.key.length===1){if(e.altKey||e.metaKey||e.ctrlKey)return;e.preventDefault(),u(!1),i(s+e.key)}else if(e.key==="ArrowLeft"||e.key==="ArrowRight"||e.key==="ArrowUp"||e.key==="ArrowDown")e.preventDefault();else if(e.key==="Backspace")if(e.preventDefault(),e.ctrlKey||e.metaKey)i("");else{const n=s.split(""),p=n.pop();if(a&&p){const l=r.decomposeBlock(p);l.pop(),l.length?n.push(r.compose(l).join("")):u(!1)}const y=n.join("");i(y)}else e.key==="Enter"||e.key==="Escape"&&u(!1)},[a,s]),f=e=>{k(e.detail.value)},d=o.useRef(m);return o.useEffect(()=>{d.current=m}),o.useEffect(()=>{const e=c==null?void 0:c.current;if(!e)return;const t=n=>d.current(n);return e.addEventListener("keydown",t),e.addEventListener("kimeinput",f),()=>{e.removeEventListener("keydown",t),e.removeEventListener("kimeinput",f)}},[]),{input:{value:s,clear:()=>k(""),setValue:k},composing:a}};module.exports=v;
//# sourceMappingURL=kime.cjs.map
